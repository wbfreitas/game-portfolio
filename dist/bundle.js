!function(t){var i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(i){return t[i]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var n,o,s=function(){function t(){this.imgs=[]}return t.prototype.addImage=function(t,i){var e=new Image;e.src=i,t.setImage(e),this.imgs.push(e)},t.prototype.load=function(t){var i=this;this.imgs.forEach((function(e){e.onload=function(){i.loads++,i.loads==i.imgs.length&&t()}}))},t}(),r=function(){function t(t,i){this.context=t,this.canvas=i,this.sprintes=[],this.isEnable=!0,this.images=new s}return t.prototype.addSprintAndImg=function(t,i){this.images.addImage(t,i),this.addSprint(t)},t.prototype.addSprint=function(t){this.sprintes.push(t),this.nextFrame()},t.prototype.enable=function(){this.isEnable=!0},t.prototype.disable=function(){this.isEnable=!1},t.prototype.cleanScreen=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.nextFrame=function(){var t=this;this.isEnable&&(this.cleanScreen(),this.sprintes.forEach((function(t){t.update()})),this.sprintes.forEach((function(t){t.draw()})),requestAnimationFrame((function(){return t.nextFrame()})))},t}(),a=function(){function t(t){this.keyPress={},this.actions=[],this.functionAction=[],this.element=t,this.startEvent(),this.stopEvent()}return t.prototype.startEvent=function(){var t=this;this.element.addEventListener("keydown",(function(i){var e=i.keyCode;t.keyPress[e]=!0,t.actions[e]=!0}))},t.prototype.stopEvent=function(){var t=this;this.element.addEventListener("keyup",(function(i){var e=i.keyCode;t.keyPress[e]=!1,t.actions[e]=!1}))},t.prototype.keyPressed=function(t){return this.keyPress[t]},t.prototype.callAction=function(t,i){this.functionAction[t]=i},t}(),h=function(){function t(t,i,e){this.context=t,this.linesNum=i,this.columnsNum=e,this.column=0,this.line=0,this.image=new Image,this.imageWidth=0,this.imageHeiht=0}return t.prototype.setImage=function(t){this.image=t},t.prototype.nextFrame=function(){var t=(new Date).getTime();this.lastTime||(this.lastTime=t),t-this.lastTime<this.interval||(this.column<this.columnsNum-1?this.column++:this.column=0,this.lastTime=t)},t.prototype.draw=function(){var t=this.imageWidth,i=this.imageHeiht;this.context.drawImage(this.image,t*this.column,i*this.line,t,i,this.x,this.y,t,i)},t}(),c=(n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),u=function(t){function i(i,e){var n=t.call(this,i,1,1)||this;return n.interations=e,n.speedX=.1,n.speedY=.1,n.rotate=0,n.interval=60,n.x=Math.floor(Math.random()*n.context.canvas.width)+1,n.y=Math.floor(Math.random()*n.context.canvas.height)+1,n}return c(i,t),i.prototype.update=function(){var t=this.context;this.x>t.canvas.width-30?this.speedX*=-1:this.x<0&&(this.speedX=.1),this.y>t.canvas.height-30?this.speedY*=-1:this.y<0&&(this.speedY=.1),this.x+=this.speedX,this.y+=this.speedY},i.prototype.draw=function(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.rotate/180/Math.PI),this.context.drawImage(this.image,-16,-16,30,30),this.context.restore(),this.rotate+=2},i}(h),p=function(){function t(t,i){this.context=t,this.color="yellow",this.width=5,this.height=10,this.shoting=!1,this.x=0,this.y=0,this.x=i.x,this.y=i.y-40}return t.prototype.update=function(){this.y--},t.prototype.draw=function(){var t=this.context;t.save(),t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height),t.restore()},t.prototype.setImage=function(){},t}();!function(t){t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.SPACE=32]="SPACE"}(o||(o={}));var f=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),d=function(t){function i(i,e,n){var s=t.call(this,i,1,1)||this;return s.interations=e,s.animation=n,s.waking=!1,s.diraction=o.RIGHT,s.speed=1,s.rotate=0,s.shoting=!1,s.interval=60,s.x=200,s.y=i.canvas.height-40,s}return f(i,t),i.prototype.verifyDiraction=function(t){return this.interations.keyPressed(t)&&!this.waking},i.prototype.isWalking=function(){var t=!1;for(var i in o)this.verifyDiraction(o.RIGHT)&&(t=!0);this.waking=t},i.prototype.addShot=function(){if(this.interations.keyPressed(o.SPACE)&&!this.shoting){var t=new p(this.context,this);this.animation.sprintes.push(t),t.draw(),this.shoting=!0}else this.interations.keyPressed(o.SPACE)||(this.shoting=!1)},i.prototype.update=function(){this.isWalking(),this.addShot(),this.verifyDiraction(o.RIGHT)&&(this.x+=this.speed,this.rotate=5),this.verifyDiraction(o.LEFT)&&(this.x-=this.speed,this.rotate=15),this.verifyDiraction(o.UP)&&(this.y-=this.speed,this.rotate=0),this.verifyDiraction(o.DOWN)&&(this.y+=this.speed,this.rotate=10)},i.prototype.draw=function(){this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.rotate/Math.PI),this.context.drawImage(this.image,-15,-15,30,40),this.context.restore()},i}(h);var l=[{imagePath:"java.png"},{imagePath:"js.png"},{imagePath:"github.png"}];!function(){!function(){var t=window.innerWidth,i=window.innerHeight,e=document.getElementById("canvas_sonic");e.setAttribute("width",t),e.setAttribute("height",i)}();var t=document.getElementById("canvas_sonic"),i=t.getContext("2d"),e=new r(i,t),n=new a(document),o=new d(i,n,e);e.addSprintAndImg(o,"nave.png"),l.forEach((function(t){var o=new u(i,n);e.addSprintAndImg(o,t.imagePath)})),e.images.load((function(){e.enable()}))}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpcmFjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYW5pbWF0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcmFjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3ByaW50ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2tpbGxzLnRzIiwid2VicGFjazovLy8uL3NyYy9zaG90LnRzIiwid2VicGFjazovLy8uL3NyYy9zaGlwLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkRJUkFDVElPTiIsImltZ3MiLCJhZGRJbWFnZSIsImlBbmltYXRpb24iLCJwYXRoIiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsInNldEltYWdlIiwidGhpcyIsInB1c2giLCJsb2FkIiwiY2FsbGJhY2siLCJmb3JFYWNoIiwiaW1nIiwib25sb2FkIiwibG9hZHMiLCJsZW5ndGgiLCJjb250ZXh0IiwiY2FudmFzIiwic3ByaW50ZXMiLCJpc0VuYWJsZSIsImltYWdlcyIsImFkZFNwcmludEFuZEltZyIsInNwcmludGUiLCJpbWFnZVBhaHRoIiwiYWRkU3ByaW50IiwibmV4dEZyYW1lIiwiZW5hYmxlIiwiZGlzYWJsZSIsImNsZWFuU2NyZWVuIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJzcHJpbnQiLCJ1cGRhdGUiLCJkcmF3IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZWxlbWVudCIsImtleVByZXNzIiwiYWN0aW9ucyIsImZ1bmN0aW9uQWN0aW9uIiwic3RhcnRFdmVudCIsInN0b3BFdmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbnYiLCJrZXlDb2RlIiwia2V5UHJlc3NlZCIsImNhbGxBY3Rpb24iLCJjYWxsQmFjayIsImxpbmVzTnVtIiwiY29sdW1uc051bSIsImNvbHVtbiIsImxpbmUiLCJpbWFnZVdpZHRoIiwiaW1hZ2VIZWlodCIsIm5vdyIsIkRhdGUiLCJnZXRUaW1lIiwibGFzdFRpbWUiLCJpbnRlcnZhbCIsImRyYXdJbWFnZSIsIngiLCJ5IiwiaW50ZXJhdGlvbnMiLCJzcGVlZFgiLCJzcGVlZFkiLCJyb3RhdGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjdHgiLCJzYXZlIiwidHJhbnNsYXRlIiwiUEkiLCJyZXN0b3JlIiwic2hpcCIsImNvbG9yIiwic2hvdGluZyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiYW5pbWF0aW9uIiwid2FraW5nIiwiZGlyYWN0aW9uIiwiUklHSFQiLCJzcGVlZCIsInZlcmlmeURpcmFjdGlvbiIsImlzV2Fsa2luZyIsIndhbGtpbmciLCJhZGRTaG90IiwiU1BBQ0UiLCJzaG90IiwiTEVGVCIsIlVQIiwiRE9XTiIsImltYWdlUGF0aCIsInciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNldEF0dHJpYnV0ZSIsInJlc2l6ZUNhbnZhcyIsImdldENvbnRleHQiLCJpbnRlcmFjdGlvbiIsInNraWxsIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FH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IiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBJQW5pbWF0aW9uIGZyb20gJy4vSUFuaW1hdGlvbic7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlbnMge1xyXG4gICAgaW1nczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgbG9hZHM6IDA7XHJcbiAgICBhZGRJbWFnZShpQW5pbWF0aW9uOiBJQW5pbWF0aW9uLCBwYXRoOiBzdHJpbmcpIHtcclxuICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgaW1hZ2Uuc3JjID0gcGF0aDtcclxuICAgICAgIGlBbmltYXRpb24uc2V0SW1hZ2UoaW1hZ2UpO1xyXG4gICAgICAgdGhpcy5pbWdzLnB1c2goaW1hZ2UpO1xyXG4gICAgfSBcclxuXHJcbiAgICBsb2FkKGNhbGxiYWNrOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmltZ3MuZm9yRWFjaChpbWcgPT4ge1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLmxvYWRzKys7IFxyXG4gICAgICAgICAgICAgICBpZih0aGlzLmxvYWRzID09IHRoaXMuaW1ncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0ICBlbnVtIERJUkFDVElPTiB7XHJcbiAgICBMRUZUID0gMzcsXHJcbiAgICBVUCA9IDM4LFxyXG4gICAgUklHSFQgPSAzOSxcclxuICAgIERPV04gPSA0MCxcclxuICAgIFNQQUNFID0gMzJcclxufSIsImltcG9ydCBJbWFnZW5zIGZyb20gJy4vaW1hZ2Vucyc7XHJcbmltcG9ydCBJQW5pbWF0aW9uIGZyb20gJy4vSUFuaW1hdGlvbic7XHJcblxyXG5jbGFzcyBBbmltYXRpb24ge1xyXG4gICAgc3ByaW50ZXM6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIGlzRW5hYmxlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIGltYWdlcyA9IG5ldyBJbWFnZW5zKCk7IFxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZXh0OmFueSwgcHJpdmF0ZSBjYW52YXM6YW55KSB7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU3ByaW50QW5kSW1nKHNwcmludGUgOklBbmltYXRpb24sIGltYWdlUGFodGggOnN0cmluZykgeyBcclxuICAgICAgICB0aGlzLmltYWdlcy5hZGRJbWFnZShzcHJpbnRlLCBpbWFnZVBhaHRoKTtcclxuICAgICAgICB0aGlzLmFkZFNwcmludChzcHJpbnRlKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTcHJpbnQoc3ByaW50ZSA6SUFuaW1hdGlvbikgeyBcclxuICAgICAgICB0aGlzLnNwcmludGVzLnB1c2goc3ByaW50ZSk7XHJcbiAgICAgICAgdGhpcy5uZXh0RnJhbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5pc0VuYWJsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZSgpIHtcclxuICAgICAgICB0aGlzLmlzRW5hYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYW5TY3JlZW4oKSB7XHJcbiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dEZyYW1lKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmlzRW5hYmxlKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYW5TY3JlZW4oKTtcclxuICAgICAgICB0aGlzLnNwcmludGVzLmZvckVhY2goc3ByaW50ID0+IHsgXHJcbiAgICAgICAgICAgIHNwcmludC51cGRhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNwcmludGVzLmZvckVhY2goc3ByaW50ID0+IHsgXHJcbiAgICAgICAgICAgIHNwcmludC5kcmF3KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubmV4dEZyYW1lKCkpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEFuaW1hdGlvbjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW50ZXJhY3Rpb24ge1xyXG4gICAgZWxlbWVudDogYW55O1xyXG4gICAga2V5UHJlc3M6IGFueSA9IHt9O1xyXG4gICAgYWN0aW9uczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgZnVuY3Rpb25BY3Rpb246IEFycmF5PGFueT4gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuc3RhcnRFdmVudCgpO1xyXG4gICAgICAgIHRoaXMuc3RvcEV2ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRFdmVudCgpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlbnY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXlDb2RlID0gZW52LmtleUNvZGU7XHJcbiAgICAgICAgICAgIHRoaXMua2V5UHJlc3Nba2V5Q29kZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNba2V5Q29kZV0gPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuICAgIHN0b3BFdmVudCgpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZW52OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBlbnYua2V5Q29kZTtcclxuICAgICAgICAgICAgIHRoaXMua2V5UHJlc3Nba2V5Q29kZV0gPSBmYWxzZTtcclxuICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1trZXlDb2RlXSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGtleVByZXNzZWQoa2V5OiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5rZXlQcmVzc1trZXldO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGxBY3Rpb24oa2V5OmFueSwgY2FsbEJhY2s6T2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5mdW5jdGlvbkFjdGlvbltrZXldID0gY2FsbEJhY2s7XHJcbiAgICB9IFxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3ByaW50ZSB7XHJcbiAgIGxhc3RUaW1lOiBudW1iZXI7XHJcbiAgIGludGVydmFsOiBudW1iZXI7XHJcbiAgIHg6IG51bWJlcjtcclxuICAgeTogbnVtYmVyO1xyXG4gICBjb2x1bW46IG51bWJlciA9IDA7XHJcbiAgIGxpbmU6IG51bWJlciA9IDA7XHJcbiAgIGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgIGltYWdlV2lkdGggPSAwO1xyXG4gICBpbWFnZUhlaWh0ID0gMDtcclxuICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNvbnRleHQ6IGFueSwgcHJvdGVjdGVkIGxpbmVzTnVtOiBhbnksIHByb3RlY3RlZCBjb2x1bW5zTnVtOiBhbnkpIHtcclxuICAgfVxyXG5cclxuICAgc2V0SW1hZ2UoaW1hZ2U6IGFueSkge1xyXG4gICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XHJcbiAgIH1cclxuXHJcbiAgIG5leHRGcmFtZSgpIHtcclxuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMubGFzdFRpbWUpIHRoaXMubGFzdFRpbWUgPSBub3c7XHJcblxyXG4gICAgICBpZiAobm93IC0gdGhpcy5sYXN0VGltZSA8IHRoaXMuaW50ZXJ2YWwpIHJldHVybjtcclxuXHJcbiAgICAgIGlmICh0aGlzLmNvbHVtbiA8IHRoaXMuY29sdW1uc051bSAtIDEpXHJcbiAgICAgICAgIHRoaXMuY29sdW1uKys7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICAgdGhpcy5jb2x1bW4gPSAwO1xyXG5cclxuICAgICAgdGhpcy5sYXN0VGltZSA9IG5vdztcclxuICAgfVxyXG5cclxuXHJcbiAgIGRyYXcoKSB7XHJcbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5pbWFnZVdpZHRoO1xyXG4gICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmltYWdlSGVpaHQ7XHJcbiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgIHRoaXMuaW1hZ2UsXHJcbiAgICAgICAgIHdpZHRoICogdGhpcy5jb2x1bW4sXHJcbiAgICAgICAgIGhlaWdodCAqIHRoaXMubGluZSxcclxuICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgdGhpcy54LFxyXG4gICAgICAgICB0aGlzLnksXHJcbiAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICBoZWlnaHQpO1xyXG4gICB9XHJcbn1cclxuIiwiXHJcbmltcG9ydCBTcHJpbnRlIGZyb20gJy4vc3ByaW50ZSc7XHJcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL2ludGVyYWN0aW9uJztcclxuaW1wb3J0IElBbmltYXRpb24gZnJvbSAnLi9JQW5pbWF0aW9uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNraWxsIGV4dGVuZHMgU3ByaW50ZSBpbXBsZW1lbnRzIElBbmltYXRpb24ge1xyXG4gICAgc3BlZWRYOiBudW1iZXIgPSAwLjE7XHJcbiAgICBzcGVlZFk6IG51bWJlciA9IDAuMTtcclxuICAgIHJvdGF0ZSA9IDA7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBhbnksIHByaXZhdGUgaW50ZXJhdGlvbnM6IEludGVyYWN0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIoY29udGV4dCwgMSwgMSk7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IDYwO1xyXG4gICAgICAgIHRoaXMueCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY29udGV4dC5jYW52YXMud2lkdGgpICsgMTs7XHJcbiAgICAgICAgdGhpcy55ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQpICsgMTs7XHJcbiAgICB9XHJcblxyXG4gICB1cGRhdGUoKSB7XHJcbiAgICAgIHZhciBjdHggPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICBpZiAodGhpcy54ID4gY3R4LmNhbnZhcy53aWR0aCAtIDMwKVxyXG4gICAgICAgICAgIHRoaXMuc3BlZWRYICo9IC0xO1xyXG4gICAgICAgIGVsc2UgaWYodGhpcy54IDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNwZWVkWCA9IDAuMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgaWYgKHRoaXMueSA+IGN0eC5jYW52YXMuaGVpZ2h0IC0gMzApIHtcclxuICAgICAgICAgICB0aGlzLnNwZWVkWSAqPSAtMTtcclxuICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMueSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVlZFkgPSAwLjE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIHRoaXMueCArPSB0aGlzLnNwZWVkWDtcclxuICAgICAgIHRoaXMueSArPSB0aGlzLnNwZWVkWTsgXHJcblxyXG5cclxuICAgfSBcclxuXHJcbiAgIGRyYXcoKSB7XHJcblxyXG4gICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpO1xyXG4gICAgICB0aGlzLmNvbnRleHQudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgdGhpcy5jb250ZXh0LnJvdGF0ZSh0aGlzLnJvdGF0ZSAvIDE4MCAvIE1hdGguUEkpO1xyXG5cclxuICAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAtMTYsIC0xNiwgMzAsIDMwKTtcclxuXHJcbiAgICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XHJcblxyXG4gICAgICAgICB0aGlzLnJvdGF0ZSArPSAyO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgSUFuaW1hdGlvbiBmcm9tICcuL0lBbmltYXRpb24nO1xyXG5pbXBvcnQgU2hpcCAgZnJvbSAnLi9zaGlwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNob3QgaW1wbGVtZW50cyBJQW5pbWF0aW9uIHtcclxuICBjb2xvciA9ICd5ZWxsb3cnO1xyXG4gIHdpZHRoID0gNTtcclxuICBoZWlnaHQgPSAxMDtcclxuICBzaG90aW5nID0gZmFsc2U7XHJcbiAgeCA9IDA7XHJcbiAgeSA9IDA7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZXh0IDphbnksIHNoaXA6IFNoaXApIHtcclxuICAgIHRoaXMueCA9IHNoaXAueDtcclxuICAgIHRoaXMueSA9IHNoaXAueSAtIDQwO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgdGhpcy55LS07XHJcbiAgfVxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICB9XHJcblxyXG4gIHNldEltYWdlKCkge1xyXG5cclxuICB9XHJcbn0iLCJpbXBvcnQgU3ByaW50ZSBmcm9tICcuL3NwcmludGUnO1xyXG5pbXBvcnQgSW50ZXJhY3Rpb24gZnJvbSAnLi9pbnRlcmFjdGlvbic7XHJcbmltcG9ydCBJQW5pbWF0aW9uIGZyb20gJy4vSUFuaW1hdGlvbic7XHJcbmltcG9ydCBBbmltYXRpb24gZnJvbSAnLi9BbmltYXRpb24nO1xyXG5pbXBvcnQgU2hvdCBmcm9tICcuL3Nob3QnO1xyXG5pbXBvcnQge0RJUkFDVElPTn0gZnJvbSAnLi9kaXJhY3Rpb24nO1xyXG5cclxuY29uc3QgbGluZXNOdW0gPSAxO1xyXG5jb25zdCBjb2x1bW5zTnVtID0gMTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaGlwIGV4dGVuZHMgU3ByaW50ZSBpbXBsZW1lbnRzIElBbmltYXRpb24ge1xyXG5cclxuICAgIHdha2luZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgZGlyYWN0aW9uID0gRElSQUNUSU9OLlJJR0hUXHJcbiAgICBzcGVlZDogbnVtYmVyID0gMTtcclxuICAgIHJvdGF0ZSA9IDA7XHJcbiAgICBzaG90aW5nID0gZmFsc2U7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBhbnksIHByaXZhdGUgaW50ZXJhdGlvbnM6IEludGVyYWN0aW9uLCBwcml2YXRlIGFuaW1hdGlvbjogQW5pbWF0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIoY29udGV4dCwgMSwgMSk7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IDYwO1xyXG4gICAgICAgIHRoaXMueCA9IDIwMDtcclxuICAgICAgICB0aGlzLnkgPSBjb250ZXh0LmNhbnZhcy5oZWlnaHQgLSA0MDtcclxuICAgIH1cclxuXHJcbiAgICB2ZXJpZnlEaXJhY3Rpb24oZGlyYWN0aW9uIDpESVJBQ1RJT04pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmF0aW9ucy5rZXlQcmVzc2VkKGRpcmFjdGlvbikgJiYgIXRoaXMud2FraW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2Fsa2luZygpIHtcclxuICAgICAgICBsZXQgd2Fsa2luZyA9IGZhbHNlOyAgICAgICAgXHJcbiAgICAgICAgZm9yKGNvbnN0IGRpcmFjdGlvbiBpbiBESVJBQ1RJT04pIFxyXG4gICAgICAgICAgICBpZih0aGlzLnZlcmlmeURpcmFjdGlvbihESVJBQ1RJT04uUklHSFQpKSB7XHJcbiAgICAgICAgICAgICAgICB3YWxraW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIHRoaXMud2FraW5nID0gd2Fsa2luZztcclxuICAgIH1cclxuXHJcbiAgICBhZGRTaG90KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmludGVyYXRpb25zLmtleVByZXNzZWQoRElSQUNUSU9OLlNQQUNFKSAmJiAhdGhpcy5zaG90aW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3QgPSBuZXcgU2hvdCh0aGlzLmNvbnRleHQsIHRoaXMpOyBcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb24uc3ByaW50ZXMucHVzaChzaG90KTtcclxuICAgICAgICAgICAgc2hvdC5kcmF3KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdGluZyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmKCF0aGlzLmludGVyYXRpb25zLmtleVByZXNzZWQoRElSQUNUSU9OLlNQQUNFKSkgIHtcclxuICAgICAgICAgICAgdGhpcy5zaG90aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmlzV2Fsa2luZygpO1xyXG4gICAgICAgIHRoaXMuYWRkU2hvdCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnZlcmlmeURpcmFjdGlvbihESVJBQ1RJT04uUklHSFQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCArPSB0aGlzLnNwZWVkO1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZSA9IDU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZlcmlmeURpcmFjdGlvbihESVJBQ1RJT04uTEVGVCkpIHtcclxuICAgICAgICAgICAgdGhpcy54IC09IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlID0gMTU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZlcmlmeURpcmFjdGlvbihESVJBQ1RJT04uVVApKSB7XHJcbiAgICAgICAgICAgIHRoaXMueSAtPSB0aGlzLnNwZWVkO1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZlcmlmeURpcmFjdGlvbihESVJBQ1RJT04uRE9XTikpIHtcclxuICAgICAgICAgICAgdGhpcy55ICs9IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlID0gMTA7XHJcbiAgICAgICAgfSBcclxuICAgICAgfVxyXG5cclxuICAgZHJhdygpIHtcclxuICAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XHJcbiAgICAgICB0aGlzLmNvbnRleHQudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgIHRoaXMuY29udGV4dC5yb3RhdGUodGhpcy5yb3RhdGUgLyBNYXRoLlBJKTtcclxuICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgLTE1LCAtMTUsIDMwLCA0MCk7XHJcbiAgICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgQW5pbWF0aW9uIGZyb20gJy4vYW5pbWF0aW9uJztcclxuaW1wb3J0IEludGVyYWN0aW9uIGZyb20gJy4vaW50ZXJhY3Rpb24nO1xyXG5pbXBvcnQgU2tpbGwgZnJvbSAnLi9za2lsbHMnO1xyXG5pbXBvcnQgU2hpcCBmcm9tICcuL3NoaXAnO1xyXG5cclxuZnVuY3Rpb24gcmVzaXplQ2FudmFzKCkge1xyXG4gIGNvbnN0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICBjb25zdCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gIGNvbnN0IGNhbnZhcyA6YW55ICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNfc29uaWMnKTtcclxuICBjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHcpO1xyXG4gIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGgpO1xyXG59XHJcblxyXG5jb25zdCBza2lsbHMgPSBbXHJcbiAge2ltYWdlUGF0aDogJ2phdmEucG5nJ30sXHJcbiAge2ltYWdlUGF0aDogJ2pzLnBuZyd9LFxyXG4gIHtpbWFnZVBhdGg6ICdnaXRodWIucG5nJ31cclxuXTtcclxuXHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJlc2l6ZUNhbnZhcygpO1xyXG4gICAgICBjb25zdCBjYW52YXMgOmFueSAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzX3NvbmljJyk7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgOmFueSA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgY29uc3QgYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbihjb250ZXh0LCBjYW52YXMpO1xyXG4gICAgICBjb25zdCBpbnRlcmFjdGlvbiA9IG5ldyBJbnRlcmFjdGlvbihkb2N1bWVudCk7XHJcbiAgICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChjb250ZXh0LCBpbnRlcmFjdGlvbiwgYW5pbWF0aW9uKTtcclxuXHJcbiAgICAgICBhbmltYXRpb24uYWRkU3ByaW50QW5kSW1nKHNoaXAsICduYXZlLnBuZycpO1xyXG5cclxuICAgICAgIHNraWxscy5mb3JFYWNoKHNraWxsID0+IHtcclxuICAgICAgICBjb25zdCBzID0gIG5ldyBTa2lsbChjb250ZXh0LCBpbnRlcmFjdGlvbik7XHJcbiAgICAgICAgYW5pbWF0aW9uLmFkZFNwcmludEFuZEltZyhzLCBza2lsbC5pbWFnZVBhdGgpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICBhbmltYXRpb24uaW1hZ2VzLmxvYWQoKCkgPT4ge1xyXG4gICAgICAgIGFuaW1hdGlvbi5lbmFibGUoKTtcclxuICAgICAgfSk7XHJcbn0pKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=